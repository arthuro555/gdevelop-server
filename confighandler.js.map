{"version":3,"file":"confighandler.js","sourceRoot":"","sources":["confighandler.ts"],"names":[],"mappings":"AAAA,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,MAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAElC,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;AAEjC,IAAI,aAAa,GAAG;IAChB,QAAQ,EAAG,MAAM,EAAE;IACnB,kBAAkB,EAAE;QAChB,UAAU,EAAG,OAAO;QACpB,UAAU,EAAG,MAAM;KACtB;CACJ,CAAC;AACF,IAAI,IAAI,GAAG,aAAa,CAAC;AACzB,QAAQ,CAAC;AAET,IAAI,EAAE,CAAC,UAAU,CAAC,aAAa,CAAC,EAAE;IAC9B,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;IAC1C,IAAI;QACA,yCAAyC;QACzC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;KACrD;IAAC,OAAO,CAAC,EAAE;QACR,IAAG,CAAC,YAAY,WAAW,EAAC;YACxB,OAAO,CAAC,GAAG,CAAC,2CAA2C,CAAC,CAAC;YACzD,IAAI,GAAG,aAAa,CAAC;YACrB,EAAE,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;SACzD;aAAM;YACH,OAAO,CAAC,GAAG,CAAC,2CAA2C,GAAG,CAAC,CAAC,CAAC;SAChE;KACJ;CACJ;KAAK;IACF,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;IAC9C,IAAI,GAAG,aAAa,CAAC;IACrB,EAAE,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;CACzD;AAGD,IAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,SAAS,EAAC;IAC5B,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;IACnD,IAAI,GAAG,aAAa,CAAC;IACrB,EAAE,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;CACzD;AAED,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC","sourcesContent":["const fs = require(\"fs\");\r\nconst uuidv4 = require(\"uuid/v4\");\r\n\r\nconsole.log(\"Loading config...\");\r\n\r\nlet defaultConfig = {\r\n    \"SECRET\" : uuidv4(),\r\n    \"defaultModerator\": {\r\n        \"username\" : \"admin\",\r\n        \"password\" : \"1234\"\r\n    }\r\n};\r\nlet conf = defaultConfig;\r\ndebugger;\r\n\r\nif (fs.existsSync('config.json')) {\r\n    console.log('Loading Existing Config...');\r\n    try {\r\n        // noinspection JSCheckFunctionSignatures\r\n        conf = JSON.parse(fs.readFileSync(\"config.json\"));\r\n    } catch (e) {\r\n        if(e instanceof SyntaxError){\r\n            console.log(\"Invalid JSON. Re-Creating Default config.\");\r\n            conf = defaultConfig;\r\n            fs.writeFileSync('config.json', JSON.stringify(conf));\r\n        } else {\r\n            console.log(\"Unknown error while reading config.json: \" + e);\r\n        }\r\n    }\r\n} else{\r\n    console.log('Creating New Default Config...');\r\n    conf = defaultConfig;\r\n    fs.writeFileSync('config.json', JSON.stringify(conf));\r\n}\r\n\r\n\r\nif(conf[\"SECRET\"] === undefined){\r\n    console.log(\"Invalid Config. Creating A new one.\");\r\n    conf = defaultConfig;\r\n    fs.writeFileSync('config.json', JSON.stringify(conf));\r\n}\r\n\r\nexports.config = conf;"]}